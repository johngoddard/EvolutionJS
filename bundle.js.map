{"version":3,"sources":["webpack:///webpack/bootstrap cae61a6771dd450cf80a","webpack:///./lib/evolution.js","webpack:///./lib/simulation.js","webpack:///./lib/prey.js","webpack:///./lib/animal.js","webpack:///./lib/utils.js","webpack:///./lib/predator.js","webpack:///./lib/chart.js","webpack:///./lib/simulation_view.js"],"names":["window","addEventListener","canvas","document","getElementById","context","getContext","simulation","simulationView","Highcharts","setOptions","global","useUTC","MUTANT_COLORS","Simulation","dimX","dimY","initialPred","initialPrey","initialPredators","DIM_X","DIM_Y","reset","mutationRate","preyGeneration","predatorSpeed","predGeneration","rate","time","speed","predators","prey","steps","mutantIdx","data","length","addPrey","addPredator","charter","color","strain","push","pos","randomPosition","radius","ctx","clearRect","allAnimals","forEach","animal","draw","moveAnimals","handleCollisions","reproducePrey","reproducePredators","die","recordData","generation","strainInfo","getStrainInfo","avgSpeed","getAverageSpeed","dominantStrain","numStrains","strains","averageSpeed","strainCount","preyObj","population","totalSpeed","maxCount","maxStrain","Object","keys","total","reproduces","mutationNum","Math","random","resetReproduce","newSpeed","strainName","sinceReproduce","reproChance","reproLikelihood","predObj","sinceFood","remove","move","x","y","toRemove","isTouching","includes","resetSinceFood","item","type","idx","indexOf","splice","UTIL","Prey","options","closestPred","findClosestPredator","dir","findDirection","position","velocity","closest","minDistance","distance","predator","Animal","otherAnimal","setVelocity","isOutOfBounds","wrap","fillStyle","beginPath","arc","PI","fill","diff","pos1","pos2","abs","xDiff","yDiff","sqrt","pow","posDiff","xDir","yDir","magnitude","Predator","findClosestPrey","Charter","maxPopGen","maxFitGen","renderFitnessChart","renderPopulationChart","playing","popInterval","fitInterval","clearInterval","$","highcharts","chart","animation","svg","marginRight","events","load","preySeries","series","predSeries","setInterval","latest","maxGen","addPoint","title","text","style","fontSize","xAxis","tickPixelInterval","yAxis","labels","format","plotLines","value","width","tooltip","formatter","name","toFixed","legend","enabled","exporting","credits","marker","fitSeries","SimulationView","status","graphID","simulationID","initializeButtons","initializeSliders","click","togglePlay","on","e","floor","currentTarget","setMutationRate","generationTime","setPreyGeneration","setPredatorSpeed","simSpeed","setSimulationSpeed","view","simInterval","step","stop","resetStrainTable","start","togglePlaying","pause","updateStrainTable","topStrains","getTopStrains","empty","append","strainArray","map","assign","sort","s1","s2","slice"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap cae61a6771dd450cf80a\n **/","import Simulation from './simulation.js';\nimport SimulationView from './simulation_view.js';\nimport Charter from './chart.js';\n\nwindow.addEventListener('DOMContentLoaded', function(){\n  let canvas = document.getElementById('simulation-canvas');\n  let context = canvas.getContext('2d');\n  let simulation = new Simulation(500, 500, 5, 30);\n  let simulationView = new SimulationView(simulation, context);\n\n  Highcharts.setOptions({\n      global: {\n          useUTC: false\n      }\n  });\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/evolution.js\n **/","import Prey from './prey.js';\nimport Predator from './predator.js';\nimport Charter from './chart.js';\n\nconst MUTANT_COLORS = ['green', 'aqua', 'bisque', 'violet', 'chartreuse', 'deeppink', 'orange'];\n\nclass Simulation {\n  constructor(dimX, dimY, initialPred, initialPrey) {\n    this.initialPredators = initialPred;\n    this.initialPrey = initialPrey;\n    this.DIM_X = dimX;\n    this.DIM_Y = dimY;\n    this.reset();\n    this.mutationRate = .04;\n    this.preyGeneration = 200;\n    this.predatorSpeed = 2.7;\n    this.predGeneration = 350;\n\n    this.reset();\n  }\n\n  setMutationRate(rate){\n    this.mutationRate = rate;\n  }\n\n  setPreyGeneration(time){\n    this.preyGeneration = time;\n  }\n\n  setPredatorSpeed(speed){\n    this.predatorSpeed = speed;\n  }\n\n  reset(){\n    this.predators = [];\n    this.prey = [];\n    this.steps = 0;\n    this.mutantIdx = 0;\n    this.data = null;\n\n    while(this.prey.length < this.initialPrey){\n      this.addPrey(2, 'blue', 'original');\n    }\n\n    while(this.predators.length < this.initialPredators){\n      this.addPredator();\n    }\n\n    this.charter = new Charter(this);\n  }\n\n  addPrey(speed, color, strain){\n    if(this.prey.length < 100){\n      this.prey.push(new Prey({\n        pos: this.randomPosition(),\n        speed: speed,\n        radius: 5,\n        color: color,\n        simulation: this,\n        strain: strain\n      }));\n    }\n  }\n\n  addPredator(){\n\n    this.predators.push(new Predator({\n      pos: this.randomPosition(),\n      speed: this.predatorSpeed,\n      radius: 10,\n      color: 'red',\n      simulation: this,\n      mutationRate: .03\n    }));\n  }\n\n  allAnimals(){\n    return [...this.prey, ...this.predators];\n  }\n\n  draw(ctx){\n    ctx.clearRect(0, 0, this.DIM_X, this.DIM_Y);\n    this.allAnimals().forEach(animal => {\n      animal.draw(ctx);\n    });\n  }\n\n  step(){\n    this.moveAnimals();\n    this.handleCollisions();\n    this.reproducePrey();\n    this.reproducePredators();\n    this.die();\n    if(this.steps % (this.preyGeneration + 50) === 0){\n      this.recordData(this.steps / (this.preyGeneration + 50));\n    }\n\n    this.steps++;\n  }\n\n  recordData(generation){\n    let strainInfo = this.getStrainInfo();\n    let avgSpeed = this.getAverageSpeed();\n\n    this.data = {\n      generation: generation,\n      predators: (this.predators.length/this.initialPredators)*100,\n      prey: (this.prey.length/this.initialPrey)*100,\n      dominantStrain: strainInfo[1],\n      numStrains: strainInfo[0],\n      strains: strainInfo[2],\n      averageSpeed: avgSpeed\n    };\n\n  }\n\n  getStrainInfo(){\n    let strains = {};\n    let strainCount = 0;\n\n    this.prey.forEach(preyObj => {\n      if(strains[preyObj.strain]){\n        strains[preyObj.strain].population += 1;\n        strains[preyObj.strain].totalSpeed += preyObj.speed;\n      } else {\n        strains[preyObj.strain] = {\n          population: 1,\n          totalSpeed: preyObj.speed,\n          color: preyObj.color\n        };\n        strainCount += 1;\n      }\n    });\n\n    let maxCount = 0;\n    let maxStrain = null;\n\n    Object.keys(strains).forEach(strain => {\n      if(strains[strain].population > maxCount){\n        maxStrain = strain;\n        maxCount = strains[strain].population;\n      }\n    });\n\n    return [strainCount, maxStrain, strains];\n  }\n\n\n  getAverageSpeed(){\n    let total = 0;\n    this.prey.forEach(preyObj => {\n      total += preyObj.speed;\n    });\n    return (total / this.prey.length);\n  }\n\n  reproducePrey(){\n    const simulation = this;\n\n    this.prey.forEach(preyObj => {\n      if(simulation.reproduces(preyObj)){\n\n        const mutationNum = Math.random();\n        preyObj.resetReproduce();\n\n        if(mutationNum > (1 - (simulation.mutationRate / 2))){\n          this.mutantIdx += 1;\n          let newSpeed = preyObj.speed + .25;\n          let strainName = `strain-${this.mutantIdx}`;\n          this.addPrey(newSpeed, MUTANT_COLORS[this.mutantIdx % MUTANT_COLORS.length], strainName);\n        } else if (mutationNum < (simulation.mutationRate / 2)) {\n          this.mutantIdx += 1;\n          let newSpeed = preyObj.speed - .25;\n          let strainName = `strain-${this.mutantIdx}`;\n          this.addPrey(newSpeed, MUTANT_COLORS[this.mutantIdx % MUTANT_COLORS.length, strainName]);\n        } else {\n          let newSpeed = preyObj.speed + .1 * (.5 - Math.random());\n          this.addPrey(newSpeed, preyObj.color, preyObj.strain);\n        }\n      }\n    });\n\n  }\n\n  reproduces(prey){\n    if (prey.sinceReproduce > this.preyGeneration){\n      let reproChance = Math.random();\n      return (reproChance < (prey.sinceReproduce - this.preyGeneration) / 100) ? true : false;\n    } else {\n      return false;\n    }\n  }\n\n  reproducePredators(){\n    const simulation = this;\n\n    this.predators.forEach(predObj => {\n      const reproChance = Math.random();\n      const reproLikelihood = (predObj.sinceReproduce - this.predGeneration) / 100;\n\n      if(reproLikelihood > reproChance){\n        predObj.resetReproduce();\n        this.addPredator();\n      }\n    });\n  }\n\n  die(){\n    let simulation = this;\n\n    this.predators.forEach(predObj => {\n      if(predObj.sinceFood > 200 || predObj.steps > 1500){\n        simulation.remove(predObj, 'predator');\n      }\n    });\n\n    this.prey.forEach(preyObj => {\n      if(preyObj.steps > 600 || !preyObj.strain){\n        simulation.remove(preyObj, 'prey');\n      }\n    });\n  }\n\n  moveAnimals(){\n    this.allAnimals().forEach(animal => {\n      animal.move();\n    });\n  }\n\n  randomPosition() {\n    return [this.DIM_X * Math.random(), this.DIM_Y * Math.random()];\n  }\n\n  isOutOfBounds(pos){\n    if(pos[0] > this.DIM_X || pos[0] < this.DIM_X || pos[1] > this.DIM_Y || pos[1] < this.DIM_Y){\n      return true;\n    }\n    return false;\n  }\n\n  wrap(pos){\n    const x = (pos[0] + this.DIM_X) % this.DIM_X;\n    const y = (pos[1] + this.DIM_Y) % this.DIM_Y;\n    return [x,y];\n  }\n\n  handleCollisions(){\n    let toRemove = [];\n\n    let simulation = this;\n    this.prey.forEach(preyObj => {\n      simulation.predators.forEach(predObj =>{\n        if(preyObj.isTouching(predObj) && !toRemove.includes(preyObj)){\n          predObj.resetSinceFood();\n          toRemove.push(preyObj);\n        }\n      });\n    });\n\n    toRemove.forEach(item => {\n      this.remove(item, 'prey');\n    });\n  }\n\n  remove(animal, type){\n    if(type === 'prey'){\n      let idx = this.prey.indexOf(animal);\n      this.prey.splice(idx, 1);\n    } else {\n      let idx = this.predators.indexOf(animal);\n      this.predators.splice(idx, 1);\n    }\n  };\n}\n\nexport default Simulation;\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/simulation.js\n **/","import Animal from './animal.js';\nimport * as UTIL from './utils.js';\n\nclass Prey extends Animal {\n  constructor(options){\n    super(options);\n  }\n\n\n  setVelocity(){\n    if(this.steps % 15 === 0 || this.steps < 10){\n      let closestPred = this.findClosestPredator();\n      let dir = UTIL.findDirection(this.position, closestPred.position);\n      this.velocity = [- this.speed * dir[0], - this.speed * dir[1]];\n    }\n  }\n\n  findClosestPredator(){\n    let prey = this;\n\n    let closest;\n    let minDistance = 100000;\n\n    this.simulation.predators.forEach(predator => {\n      const distance = UTIL.distance(prey.position, predator.position);\n      if(distance < minDistance){\n        minDistance = distance;\n        closest = predator;\n      }\n    });\n\n    return closest;\n  }\n}\n\nexport default Prey;\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/prey.js\n **/","import * as UTIL from './utils.js';\n\nclass Animal {\n  constructor(options) {\n    this.position = options['pos'];\n    this.speed = options['speed'];\n    this.radius = options['radius'];\n    this.color = options['color'];\n    this.simulation = options['simulation'];\n    this.velocity = [0, 0];\n    this.steps = 0;\n    this.strain = options['strain'];\n    this.sinceReproduce = 0;\n  }\n\n  isTouching(otherAnimal){\n    if(UTIL.distance(this.position, otherAnimal.position) < (this.radius + otherAnimal.radius)){\n      return true;\n    }\n    return false;\n  }\n\n  move(){\n    this.steps++;\n\n    this.setVelocity();\n    this.position[0] += this.velocity[0];\n    this.position[1] += this.velocity[1];\n    if(this.simulation.isOutOfBounds(this.position)){\n      this.position = this.simulation.wrap(this.position);\n    }\n\n    this.sinceReproduce++;\n  }\n\n\n  resetReproduce(){\n    this.sinceReproduce = 0; \n  }\n\n  draw(ctx){\n    ctx.fillStyle = this.color;\n    ctx.beginPath();\n\n    ctx.arc(\n      this.position[0],\n      this.position[1],\n      this.radius,\n      0,\n      2 * Math.PI,\n      false\n    );\n\n    ctx.fill();\n  }\n}\n\nexport default Animal;\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/animal.js\n **/","\nexport const diff = (pos1, pos2, dir) => {\n\n  let idx = dir === 'x' ? 0 : 1;\n\n  if(Math.abs(pos2[idx] - pos1[idx]) > 250){\n    if(pos2[idx] > 250){\n      return (pos2[idx] - 500) - pos1[idx];\n    } else {\n      return (500 + pos2[idx]) - pos1[idx];\n    }\n  } else {\n    return (pos2[idx] - pos1[idx]);\n  }\n};\n\n\nexport const dir = (pos1, pos2, dir) => {\n  let idx = dir === 'x' ? 0 : 1;\n  if(pos1[idx] < pos2[idx]){\n    if((pos2[idx] - pos1[idx]) < (pos1[idx] + 500 - pos2[idx])){\n      return 1;\n    } else {\n      return - 1;\n    }\n  } else {\n    if((pos1[idx] - pos2[idx]) < (pos2[idx] + 500 - pos1[idx])){\n      return -1;\n    } else {\n      return 1;\n    }\n  }\n};\n\n\nexport const distance = (pos1, pos2) => {\n  let xDiff = diff(pos1, pos2, 'x');\n  let yDiff = diff(pos1, pos2, 'y');\n\n  return Math.sqrt(Math.pow(xDiff, 2) + Math.pow(yDiff, 2));\n}\n\nexport const findDirection = (pos1, pos2) => {\n  let posDiff = [diff(pos1, pos2, 'x'), diff(pos1, pos2, 'y')];\n\n  let xDir = dir(pos1, pos2, 'x');\n  let yDir = dir(pos1, pos2, 'y');\n\n  let magnitude = Math.pow(posDiff[0], 2) + Math.pow(posDiff[1], 2);\n  return [xDir * Math.pow(posDiff[0], 2)/magnitude, yDir * Math.pow(posDiff[1], 2)/magnitude];\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/utils.js\n **/","import Animal from './animal.js';\nimport * as UTIL from './utils.js';\n\n\nclass Predator extends Animal {\n  constructor(options){\n    super(options);\n    this.sinceFood = 0;\n  }\n\n  setVelocity(){\n    if(this.steps % 5 === 0 || this.steps < 10){\n      let closestPred = this.findClosestPrey();\n      let dir = UTIL.findDirection(this.position, closestPred.position);\n\n      this.velocity = [\n        this.simulation.predatorSpeed * dir[0],\n        this.simulation.predatorSpeed * dir[1]\n      ];\n    }\n\n    this.sinceFood++;\n  }\n\n  findClosestPrey(){\n    let predator = this;\n\n    let closest;\n    let minDistance = 100000;\n\n    this.simulation.prey.forEach(prey => {\n      const distance = UTIL.distance(predator.position, prey.position);\n      if(distance < minDistance){\n        minDistance = distance;\n        closest = prey;\n      }\n    });\n\n    return closest;\n  }\n\n  resetSinceFood(){\n    this.sinceFood = 0;\n  }\n}\n\nexport default Predator;\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/predator.js\n **/","class Charter {\n  constructor(simulation){\n    this.simulation = simulation;\n    this.maxPopGen = 0;\n    this.maxFitGen = 0;\n    this.renderFitnessChart();\n    this.renderPopulationChart();\n    this.playing = false;\n    this.popInterval;\n    this.fitInterval;\n  }\n\n  togglePlaying(){\n    this.playing = this.playing ? false : true;\n  }\n\n  stop(){\n    clearInterval(this.popInterval);\n    clearInterval(this.fitInterval);\n  }\n\n  renderPopulationChart(){\n    let simulation = this.simulation;\n    let charter = this;\n\n    $('#pop-graph').highcharts({\n      chart: {\n        type: 'spline',\n        animation: Highcharts.svg,\n        marginRight: 10,\n        events: {\n          load: function () {\n            let preySeries = this.series[0];\n            let predSeries = this.series[1];\n\n            charter.popInterval = setInterval(function () {\n              let latest = simulation.data;\n\n              if(latest && charter.playing && latest.generation > charter.maxPopGen){\n                charter.maxGen = latest.generation;\n\n                preySeries.addPoint([latest.generation, latest.prey], true, false);\n                predSeries.addPoint([latest.generation, latest.predators], true, false);\n              }\n            }, 1000);\n          }\n        }\n      },\n    title: {\n      text: 'Species Populations',\n      style: {\n              fontSize: '14px'\n            }\n    },\n    xAxis: {\n      title: {\n        text: 'Generations'\n      },\n      tickPixelInterval: 150\n    },\n    yAxis: {\n      title: {\n        text: 'Population (relative to initial)'\n      },\n      labels: {\n        format: `{value} %`\n      },\n      plotLines: [{\n        value: 0,\n        width: 1,\n        color: '#808080'\n      }]\n    },\n    tooltip: {\n      formatter: function () {\n        return '<b>' + `${this.series.name} Population` + '</b><br/>' +\n          `Generation: ${this.x}` + '<br/>' +\n          `Relative population: ${this.y.toFixed(2)} %`;\n      }\n    },\n    legend: {\n      enabled: true\n    },\n    exporting: {\n      enabled: false\n    },\n    credits: {\n      enabled: false\n    },\n    series: [{\n      name: 'Prey',\n      data: (function () {\n              return [[0,100]];\n            }()),\n      marker: {\n        enabled: true\n        },\n      },\n      {\n        name: 'Predators',\n        data: (function () {\n          return [[0,100]];\n        }()),\n        marker: {\n          enabled: true\n          },\n        }]\n    });\n  }\n\n  renderFitnessChart(){\n    let simulation = this.simulation;\n    let charter = this;\n    $('#fit-graph').highcharts({\n      chart: {\n        type: 'spline',\n        animation: Highcharts.svg,\n        marginRight: 10,\n        events: {\n          load: function () {\n            let fitSeries = this.series[0];\n\n            charter.fitInterval = setInterval(function () {\n              let latest = simulation.data;\n\n              if(latest && charter.playing && latest.generation > charter.maxFitGen){\n                charter.maxFitGen = latest.generation;\n                fitSeries.addPoint([latest.generation, latest.averageSpeed], true, false);\n              }\n            }, 1000);\n          }\n        }\n      },\n    title: {\n      text: 'Average Prey Fitness',\n      style: {\n              fontSize: '14px'\n            }\n    },\n    xAxis: {\n      title: {\n        text: 'Generations'\n      },\n      tickPixelInterval: 150\n    },\n    yAxis: {\n      title: {\n        text: 'Average Speed'\n      },\n      labels: {\n        format: `{value}`\n      },\n      plotLines: [{\n        value: 0,\n        width: 1,\n        color: '#f00'\n      }]\n    },\n    tooltip: {\n      formatter: function () {\n        return '<b>' + `Average Prey Fitness` + '</b><br/>' +\n          `Generation: ${this.x}` + '<br/>' +\n          `Average speed: ${this.y.toFixed(3)}`;\n      }\n    },\n    legend: {\n      enabled: false\n    },\n    exporting: {\n      enabled: false\n    },\n    credits: {\n      enabled: false\n    },\n    series: [{\n      name: 'Average Speed',\n      data: (function () {\n              return [[0,2]];\n            }())\n      }]\n    });\n  }\n}\n\nexport default Charter;\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/chart.js\n **/","class SimulationView {\n  constructor(simulation, ctx) {\n    this.simulation = simulation;\n    this.ctx = ctx;\n    this.maxGen = 0;\n    this.status = 'paused';\n    this.graphID;\n    this.simulationID;\n\n    this.initializeButtons();\n    this.initializeSliders();\n  }\n\n  initializeButtons(){\n    $('#play-btn').click(() => {\n      this.togglePlay();\n    });\n\n    $('#reset-btn').click(() => {\n      this.reset();\n    });\n  }\n\n  initializeSliders(){\n    $('#mut-slider').on('input', (e) => {\n      $('#mut-label').text(`Mutation Rate: ${Math.floor(e.currentTarget.value * 100)}%`)\n    });\n\n    $('#mut-slider').on('change', (e) => {\n      let mutationRate = e.currentTarget.value;\n      this.simulation.setMutationRate(mutationRate);\n    });\n\n    $('#gen-slider').on('input', (e) => {\n      $('#gen-label').text(`Prey generation time: ${e.currentTarget.value}`);\n    });\n\n    $('#gen-slider').on('change', (e) => {\n      let generationTime = e.currentTarget.value;\n      this.simulation.setPreyGeneration(generationTime * 50);\n    });\n\n    $('#speed-slider').on('input', (e) => {\n      $('#speed-label').text(`Predator speed: ${e.currentTarget.value}`);\n    });\n\n    $('#speed-slider').on('change', (e) => {\n      let speed = e.currentTarget.value;\n      this.simulation.setPredatorSpeed(speed);\n    });\n\n    $('#sim-speed-slider').on('input', (e) => {\n      $('#sim-speed-label').text(`Simulation speed: ${e.currentTarget.value}x`)\n    });\n\n    $('#sim-speed-slider').on('change', (e) => {\n      let simSpeed = e.currentTarget.value;\n      this.setSimulationSpeed(simSpeed);\n    });\n  }\n\n  setSimulationSpeed(speed){\n    let view = this;\n\n    if(this.simulationID){\n      clearInterval(this.simulationID);\n    }\n\n    let simInterval = 30 / speed;\n\n    this.simulationID = window.setInterval(() => {\n      view.simulation.draw(view.ctx);\n      view.simulation.step();\n      if(view.simulation.prey.length === 0 || view.simulation.predators.length === 0){\n        window.clearInterval(this.simulationID);\n      }\n    }, simInterval);\n\n  }\n\n  reset(){\n    clearInterval(this.graphID);\n    clearInterval(this.simulationID);\n    this.simulation.charter.stop();\n\n    this.simulation.reset();\n    this.resetStrainTable();\n\n    if(this.status === 'paused'){\n      this.togglePlay();\n    } else{\n      this.start();\n      this.simulation.charter.togglePlaying();\n    }\n  }\n\n\n\n\n  togglePlay(){\n    if(this.status === 'paused'){\n      this.start();\n      this.status = 'playing';\n      $('#play-btn').text('Pause');\n    } else{\n      this.pause();\n      this.status = 'paused';\n      $('#play-btn').text('Start');\n    }\n\n    this.simulation.charter.togglePlaying();\n  }\n\n  pause(){\n    clearInterval(this.graphID);\n    clearInterval(this.simulationID);\n  }\n\n  start(){\n    let view = this;\n\n    this.graphID = setInterval(function () {\n      let latest = view.simulation.data;\n\n      if(latest.generation > view.maxGen){\n        view.maxGen = latest.generation;\n        view.updateStrainTable();\n      }\n    }, 1000);\n\n    this.setSimulationSpeed(1);\n  }\n\n  updateStrainTable(){\n\n    const topStrains = this.getTopStrains();\n    $('#top-strains-body').empty();\n\n    topStrains.forEach(strain => {\n      $('#top-strains-body').append(\n        `<tr>\n          <td>\n            <div class=\"strain-key\" style=\"background:${strain.color}\"></div>\n            ${strain.name}\n          </td>\n          <td>${strain.population}</td>\n          <td>${(strain.totalSpeed / strain.population).toFixed(3)}</td>\n        </tr>`\n      );\n    });\n\n    $('#table-title').text(`Top Strains: Generation ${this.maxGen}`);\n  }\n\n  getTopStrains(){\n    const strains = this.simulation.data.strains;\n\n    let strainArray = Object.keys(strains).map(strainName =>{\n      return Object.assign({}, strains[strainName], {name: strainName});\n    });\n\n    return strainArray.sort((s1, s2) => {\n      return s2.population - s1.population;\n    }).slice(0,3);\n  }\n\n  resetStrainTable(){\n    $('#top-strains-body').empty();\n    $('#top-strains-body').append(\n      `<tr>\n        <td>\n          <div class=\"strain-key\" style=\"background:blue\"></div>\n          original\n        </td>\n        <td>30</td>\n        <td>2</td>\n      </tr>`\n    );\n\n    $('#table-title').text('Top strains: Generation 0');\n  }\n}\n\nexport default SimulationView;\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/simulation_view.js\n **/"],"sourceRoot":""}