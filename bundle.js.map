{"version":3,"sources":["webpack:///webpack/bootstrap e34010b760c58d947252","webpack:///./lib/evolution.js","webpack:///./lib/simulation.js","webpack:///./lib/prey.js","webpack:///./lib/animal.js","webpack:///./lib/utils.js","webpack:///./lib/predator.js","webpack:///./lib/chart.js","webpack:///./lib/simulation_view.js"],"names":["window","addEventListener","canvas","document","getElementById","context","getContext","simulation","simulationView","Highcharts","setOptions","global","useUTC","start","COLORS","Simulation","dimX","dimY","initialPred","initialPrey","DIM_X","DIM_Y","initialPredators","predators","prey","steps","mutationRate","mutantIdx","data","preyGeneration","predGeneration","length","addPrey","addPredator","charter","speed","color","strain","push","pos","randomPosition","radius","ctx","clearRect","allAnimals","forEach","animal","draw","moveAnimals","handleCollisions","reproducePrey","reproducePredators","die","recordData","generation","strainInfo","getStrainInfo","avgSpeed","getAverageSpeed","dominantStrain","numStrains","strains","averageSpeed","strainCount","preyObj","maxCount","maxStrain","Object","keys","total","reproduces","mutationNum","Math","random","resetReproduce","newSpeed","sinceReproduce","reproChance","reproLikelihood","predObj","sinceFood","remove","move","x","y","toRemove","isTouching","includes","resetSinceFood","item","type","idx","indexOf","splice","UTIL","Prey","options","closestPred","findClosestPredator","dir","findDirection","position","velocity","closest","minDistance","distance","predator","Animal","otherAnimal","setVelocity","isOutOfBounds","wrap","fillStyle","beginPath","arc","PI","fill","diff","pos1","pos2","abs","xDiff","yDiff","sqrt","pow","posDiff","xDir","yDir","magnitude","Predator","findClosestPrey","Charter","maxPopGen","maxFitGen","renderFitnessChart","renderPopulationChart","$","highcharts","chart","animation","svg","marginRight","events","load","preySeries","series","predSeries","setInterval","latest","slice","maxGen","addPoint","title","text","style","fontSize","xAxis","tickPixelInterval","yAxis","labels","format","plotLines","value","width","tooltip","formatter","name","legend","enabled","exporting","marker","fitSeries","SimulationView","view","simulationID","step"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap e34010b760c58d947252\n **/","import Simulation from './simulation.js';\nimport SimulationView from './simulation_view.js';\nimport Charter from './chart.js';\n\nwindow.addEventListener('DOMContentLoaded', function(){\n  let canvas = document.getElementById('simulation-canvas');\n  let context = canvas.getContext('2d');\n  let simulation = new Simulation(500, 500, 5, 30);\n  let simulationView = new SimulationView(simulation, context);\n  Highcharts.setOptions({\n      global: {\n          useUTC: false\n      }\n  });\n\n  simulationView.start();\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/evolution.js\n **/","import Prey from './prey.js';\nimport Predator from './predator.js';\nimport Charter from './chart.js';\n\nconst COLORS = ['blue', 'green', 'aqua', 'bisque', 'violet', 'chartreuse', 'deeppink', 'orange'];\n\nclass Simulation {\n  constructor(dimX, dimY, initialPred, initialPrey) {\n    this.DIM_X = dimX;\n    this.DIM_Y = dimY;\n    this.initialPredators = initialPred;\n    this.initialPrey = initialPrey;\n    this.predators = [];\n    this.prey = [];\n    this.steps = 0;\n    this.mutationRate = .03;\n    this.mutantIdx = 0;\n    this.data = [];\n    this.preyGeneration = 200;\n    this.predGeneration = 350;\n\n    while(this.prey.length < this.initialPrey){\n      this.addPrey(2, 'blue', 'original');\n    }\n\n    while(this.predators.length < this.initialPredators){\n      this.addPredator();\n    }\n\n    this.charter = new Charter(this)\n  }\n\n  addPrey(speed, color, strain){\n    if(this.prey.length < 100){\n      this.prey.push(new Prey({\n        pos: this.randomPosition(),\n        speed: speed,\n        radius: 5,\n        color: color,\n        simulation: this,\n        strain: strain\n      }));\n    }\n  }\n\n  addPredator(){\n    this.predators.push(new Predator({\n      pos: this.randomPosition(),\n      speed: 2.7,\n      radius: 10,\n      color: 'red',\n      simulation: this,\n      mutationRate: .03\n    }));\n  }\n\n  allAnimals(){\n    return [...this.prey, ...this.predators];\n  }\n\n  draw(ctx){\n    ctx.clearRect(0, 0, this.DIM_X, this.DIM_Y);\n    this.allAnimals().forEach(animal => {\n      animal.draw(ctx);\n    });\n  }\n\n  step(){\n    this.moveAnimals();\n    this.handleCollisions();\n    this.reproducePrey();\n    this.reproducePredators();\n    this.die();\n    if(this.steps % (this.preyGeneration + 50) === 0){\n      this.recordData(this.steps / 250);\n    }\n\n    this.steps++;\n  }\n\n  recordData(generation){\n    let strainInfo = this.getStrainInfo();\n    let avgSpeed = this.getAverageSpeed();\n\n    this.data.push({\n      generation: generation,\n      predators: (this.predators.length/this.initialPredators)*100,\n      prey: (this.prey.length/this.initialPrey)*100,\n      dominantStrain: strainInfo[1],\n      numStrains: strainInfo[0],\n      strains: strainInfo[2],\n      averageSpeed: avgSpeed\n    });\n\n  }\n\n  getStrainInfo(){\n    let strains = {};\n    let strainCount = 0;\n\n    this.prey.forEach(preyObj => {\n      if(strains[preyObj.strain]){\n        strains[preyObj.strain] = strains[preyObj.strain] + 1;\n      } else {\n        strains[preyObj.strain] = 1;\n        strainCount += 1;\n      }\n    });\n\n    let maxCount = 0;\n    let maxStrain = null;\n\n    Object.keys(strains).forEach(strain => {\n      if(strains[strain] > maxCount){\n        maxStrain = strain;\n        maxCount = strains[strain];\n      }\n    });\n\n    return [strainCount, maxStrain, strains];\n  }\n\n\n  getAverageSpeed(){\n    let total = 0;\n    this.prey.forEach(preyObj => {\n      total += preyObj.speed;\n    });\n    return (total / this.prey.length);\n  }\n\n  reproducePrey(){\n    const simulation = this;\n\n    this.prey.forEach(preyObj => {\n      if(simulation.reproduces(preyObj)){\n\n        const mutationNum = Math.random();\n        preyObj.resetReproduce();\n\n        if(mutationNum > .97){\n          this.mutantIdx += 1;\n          let newSpeed = preyObj.speed + .25;\n          this.addPrey(newSpeed, COLORS[this.mutantIdx % COLORS.length], `strain-${this.mutantIdx}`);\n        } else if (mutationNum < .03) {\n          this.mutantIdx += 1;\n          let newSpeed = preyObj.speed - .25;\n          this.addPrey(newSpeed, COLORS[this.mutantIdx % COLORS.length, `strain-${this.mutantIdx}`]);\n        } else {\n          let newSpeed = preyObj.speed + .1 * (.5 - Math.random());\n          this.addPrey(newSpeed, preyObj.color, preyObj.strain);\n        }\n      }\n    });\n\n  }\n\n  reproduces(prey){\n    if (prey.sinceReproduce > this.preyGeneration){\n      let reproChance = Math.random();\n      return (reproChance < (prey.sinceReproduce - this.preyGeneration) / 100) ? true : false;\n    } else {\n      return false;\n    }\n  }\n\n  reproducePredators(){\n    const simulation = this;\n\n    this.predators.forEach(predObj => {\n      const reproChance = Math.random();\n      const reproLikelihood = (predObj.sinceReproduce - this.predGeneration) / 100;\n\n      if(reproLikelihood > reproChance){\n        predObj.resetReproduce();\n        this.addPredator();\n      }\n    });\n  }\n\n  die(){\n    let simulation = this;\n\n    this.predators.forEach(predObj => {\n      if(predObj.sinceFood > 200 || predObj.steps > 1500){\n        simulation.remove(predObj, 'predator');\n      }\n    });\n\n    this.prey.forEach(preyObj => {\n      if(preyObj.steps > 600){\n        simulation.remove(preyObj, 'prey');\n      }\n    });\n  }\n\n  moveAnimals(){\n    this.allAnimals().forEach(animal => {\n      animal.move();\n    });\n  }\n\n  randomPosition() {\n    return [this.DIM_X * Math.random(), this.DIM_Y * Math.random()];\n  }\n\n  isOutOfBounds(pos){\n    if(pos[0] > this.DIM_X || pos[0] < this.DIM_X || pos[1] > this.DIM_Y || pos[1] < this.DIM_Y){\n      return true;\n    }\n    return false;\n  }\n\n  wrap(pos){\n    const x = (pos[0] + this.DIM_X) % this.DIM_X;\n    const y = (pos[1] + this.DIM_Y) % this.DIM_Y;\n    return [x,y];\n  }\n\n  handleCollisions(){\n    let toRemove = [];\n\n    let simulation = this;\n    this.prey.forEach(preyObj => {\n      simulation.predators.forEach(predObj =>{\n        if(preyObj.isTouching(predObj) && !toRemove.includes(preyObj)){\n          predObj.resetSinceFood();\n          toRemove.push(preyObj);\n        }\n      });\n    });\n\n    toRemove.forEach(item => {\n      this.remove(item, 'prey');\n    });\n  }\n\n  remove(animal, type){\n    if(type === 'prey'){\n      let idx = this.prey.indexOf(animal);\n      this.prey.splice(idx, 1);\n    } else {\n      let idx = this.predators.indexOf(animal);\n      this.predators.splice(idx, 1);\n    }\n  };\n}\n\nexport default Simulation;\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/simulation.js\n **/","import Animal from './animal.js';\nimport * as UTIL from './utils.js';\n\nclass Prey extends Animal {\n  constructor(options){\n    super(options);\n  }\n\n\n  setVelocity(){\n    if(this.steps % 15 === 0 || this.steps < 10){\n      let closestPred = this.findClosestPredator();\n      let dir = UTIL.findDirection(this.position, closestPred.position);\n      this.velocity = [- this.speed * dir[0], - this.speed * dir[1]];\n    }\n  }\n\n  findClosestPredator(){\n    let prey = this;\n\n    let closest;\n    let minDistance = 100000;\n\n    this.simulation.predators.forEach(predator => {\n      const distance = UTIL.distance(prey.position, predator.position);\n      if(distance < minDistance){\n        minDistance = distance;\n        closest = predator;\n      }\n    });\n\n    return closest;\n  }\n}\n\nexport default Prey;\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/prey.js\n **/","import * as UTIL from './utils.js';\n\nclass Animal {\n  constructor(options) {\n    this.position = options['pos'];\n    this.speed = options['speed'];\n    this.radius = options['radius'];\n    this.color = options['color'];\n    this.simulation = options['simulation'];\n    this.velocity = [0, 0];\n    this.steps = 0;\n    this.strain = options['strain'];\n    this.sinceReproduce = 0;\n  }\n\n  isTouching(otherAnimal){\n    if(UTIL.distance(this.position, otherAnimal.position) < (this.radius + otherAnimal.radius)){\n      return true;\n    }\n    return false;\n  }\n\n  move(){\n    this.steps++;\n\n    this.setVelocity();\n    this.position[0] += this.velocity[0];\n    this.position[1] += this.velocity[1];\n    if(this.simulation.isOutOfBounds(this.position)){\n      this.position = this.simulation.wrap(this.position);\n    }\n\n    this.sinceReproduce++;\n  }\n\n\n  resetReproduce(){\n    this.sinceReproduce = 0; \n  }\n\n  draw(ctx){\n    ctx.fillStyle = this.color;\n    ctx.beginPath();\n\n    ctx.arc(\n      this.position[0],\n      this.position[1],\n      this.radius,\n      0,\n      2 * Math.PI,\n      false\n    );\n\n    ctx.fill();\n  }\n}\n\nexport default Animal;\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/animal.js\n **/","\nexport const diff = (pos1, pos2, dir) => {\n\n  let idx = dir === 'x' ? 0 : 1;\n\n  if(Math.abs(pos2[idx] - pos1[idx]) > 250){\n    if(pos2[idx] > 250){\n      return (pos2[idx] - 500) - pos1[idx];\n    } else {\n      return (500 + pos2[idx]) - pos1[idx];\n    }\n  } else {\n    return (pos2[idx] - pos1[idx]);\n  }\n};\n\n\nexport const dir = (pos1, pos2, dir) => {\n  let idx = dir === 'x' ? 0 : 1;\n  if(pos1[idx] < pos2[idx]){\n    if((pos2[idx] - pos1[idx]) < (pos1[idx] + 500 - pos2[idx])){\n      return 1;\n    } else {\n      return - 1;\n    }\n  } else {\n    if((pos1[idx] - pos2[idx]) < (pos2[idx] + 500 - pos1[idx])){\n      return -1;\n    } else {\n      return 1;\n    }\n  }\n};\n\n\nexport const distance = (pos1, pos2) => {\n  let xDiff = diff(pos1, pos2, 'x');\n  let yDiff = diff(pos1, pos2, 'y');\n\n  return Math.sqrt(Math.pow(xDiff, 2) + Math.pow(yDiff, 2));\n}\n\nexport const findDirection = (pos1, pos2) => {\n  let posDiff = [diff(pos1, pos2, 'x'), diff(pos1, pos2, 'y')];\n\n  let xDir = dir(pos1, pos2, 'x');\n  let yDir = dir(pos1, pos2, 'y');\n\n  let magnitude = Math.pow(posDiff[0], 2) + Math.pow(posDiff[1], 2);\n  return [xDir * Math.pow(posDiff[0], 2)/magnitude, yDir * Math.pow(posDiff[1], 2)/magnitude];\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/utils.js\n **/","import Animal from './animal.js';\nimport * as UTIL from './utils.js';\n\n\nclass Predator extends Animal {\n  constructor(options){\n    super(options);\n    this.sinceFood = 0;\n  }\n\n  setVelocity(){\n    if(this.steps % 5 === 0 || this.steps < 10){\n      let closestPred = this.findClosestPrey();\n      let dir = UTIL.findDirection(this.position, closestPred.position);\n      this.velocity = [this.speed * dir[0], this.speed * dir[1]];\n    }\n\n    this.sinceFood++;\n  }\n\n  findClosestPrey(){\n    let predator = this;\n\n    let closest;\n    let minDistance = 100000;\n\n    this.simulation.prey.forEach(prey => {\n      const distance = UTIL.distance(predator.position, prey.position);\n      if(distance < minDistance){\n        minDistance = distance;\n        closest = prey;\n      }\n    });\n\n    return closest;\n  }\n\n  resetSinceFood(){\n    this.sinceFood = 0;\n  }\n}\n\nexport default Predator;\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/predator.js\n **/","class Charter {\n  constructor(simulation){\n    this.simulation = simulation;\n    this.maxPopGen = 0;\n    this.maxFitGen = 0;\n    this.renderFitnessChart();\n    this.renderPopulationChart();\n  }\n\n  renderPopulationChart(){\n    let simulation = this.simulation;\n    let charter = this;\n    $('#pop-graph').highcharts({\n      chart: {\n        type: 'spline',\n        animation: Highcharts.svg,\n        marginRight: 10,\n        events: {\n          load: function () {\n            let preySeries = this.series[0];\n            let predSeries = this.series[1];\n\n            setInterval(function () {\n              let latest = simulation.data.slice(-1)[0];\n\n              if(latest.generation > charter.maxPopGen){\n                charter.maxGen = latest.generation;\n                preySeries.addPoint([latest.generation, latest.prey], true, false);\n                predSeries.addPoint([latest.generation, latest.predators], true, false);\n              }\n            }, 1000);\n          }\n        }\n      },\n    title: {\n      text: 'Species populations',\n      style: {\n              fontSize: '14px'\n            }\n    },\n    xAxis: {\n      title: {\n        text: 'Generations'\n      },\n      tickPixelInterval: 150\n    },\n    yAxis: {\n      title: {\n        text: 'Population (relative to initial)'\n      },\n      labels: {\n        format: `{value} %`\n      },\n      plotLines: [{\n        value: 0,\n        width: 1,\n        color: '#808080'\n      }]\n    },\n    tooltip: {\n      formatter: function () {\n        return '<b>' + `${this.series.name} Population` + '</b><br/>' +\n          `Generation: ${this.x}` + '<br/>' +\n          `Relative population: ${this.y}`;\n      }\n    },\n    legend: {\n      enabled: true\n    },\n    exporting: {\n      enabled: false\n    },\n    series: [{\n      name: 'Prey',\n      data: (function () {\n              return [[0,100]];\n            }()),\n      marker: {\n        enabled: true\n        },\n      },\n      {\n        name: 'Predators',\n        data: (function () {\n          return [[0,100]];\n        }()),\n        marker: {\n          enabled: true\n          },\n        }]\n    });\n  }\n\n  renderFitnessChart(){\n    let simulation = this.simulation;\n    let charter = this;\n    $('#fit-graph').highcharts({\n      chart: {\n        type: 'spline',\n        animation: Highcharts.svg,\n        marginRight: 10,\n        events: {\n          load: function () {\n            let fitSeries = this.series[0];\n\n            setInterval(function () {\n              let latest = simulation.data.slice(-1)[0];\n\n              if(latest.generation > charter.maxFitGen){\n                charter.maxFitGen = latest.generation;\n                fitSeries.addPoint([latest.generation, latest.averageSpeed], true, false);\n              }\n            }, 1000);\n          }\n        }\n      },\n    title: {\n      text: 'Average Prey Fitness',\n      style: {\n              fontSize: '14px'\n            }\n    },\n    xAxis: {\n      title: {\n        text: 'Generations'\n      },\n      tickPixelInterval: 150\n    },\n    yAxis: {\n      title: {\n        text: 'Average Speed'\n      },\n      labels: {\n        format: `{value}`\n      },\n      plotLines: [{\n        value: 0,\n        width: 1,\n        color: '#f00'\n      }]\n    },\n    tooltip: {\n      formatter: function () {\n        return '<b>' + `Average Prey Fitness` + '</b><br/>' +\n          `Generation: ${this.x}` + '<br/>' +\n          `Average speed: ${this.y}`;\n      }\n    },\n    legend: {\n      enabled: false\n    },\n    exporting: {\n      enabled: false\n    },\n    series: [{\n      name: 'Average Speed',\n      data: (function () {\n              return [[0,2]];\n            }())\n      }]\n    });\n  }\n}\n\nexport default Charter;\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/chart.js\n **/","class SimulationView {\n  constructor(simulation, ctx) {\n    this.simulation = simulation;\n    this.ctx = ctx;\n  }\n\n  start(){\n    let view = this;\n\n    this.simulationID = window.setInterval(() => {\n      view.simulation.draw(view.ctx);\n      view.simulation.step();\n    }, 30);\n  }\n}\n\nexport default SimulationView;\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/simulation_view.js\n **/"],"sourceRoot":""}