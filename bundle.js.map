{"version":3,"sources":["webpack:///webpack/bootstrap 356ce5481f12db82a91f","webpack:///./lib/evolution.js","webpack:///./lib/simulation.js","webpack:///./lib/prey.js","webpack:///./lib/animal.js","webpack:///./lib/utils.js","webpack:///./lib/predator.js","webpack:///./lib/simulation_view.js","webpack:///./lib/chart.js"],"names":["window","addEventListener","canvas","document","getElementById","context","getContext","simulation","simulationView","Highcharts","setOptions","global","useUTC","start","COLORS","Simulation","dimX","dimY","initialPred","initialPrey","DIM_X","DIM_Y","initialPredators","predators","prey","steps","mutationRate","mutantIdx","data","preyGeneration","length","addPrey","addPredator","charter","speed","color","strain","push","pos","randomPosition","radius","ctx","clearRect","allAnimals","forEach","animal","draw","moveAnimals","handleCollisions","reproduce","die","recordData","generation","strainInfo","getStrainInfo","avgSpeed","getAverageSpeed","dominantStrain","numStrains","strains","averageSpeed","strainCount","preyObj","maxCount","maxStrain","Object","keys","total","mutationNum","Math","random","newSpeed","predObj","sinceFood","remove","move","x","y","toRemove","isTouching","includes","resetSinceFood","item","type","idx","indexOf","splice","UTIL","Prey","options","closestPred","findClosestPredator","dir","findDirection","position","velocity","closest","minDistance","distance","predator","Animal","otherAnimal","setVelocity","isOutOfBounds","wrap","fillStyle","beginPath","arc","PI","fill","diff","pos1","pos2","abs","xDiff","yDiff","sqrt","pow","posDiff","xDir","yDir","magnitude","Predator","findClosestPrey","SimulationView","view","simulationID","setInterval","step","Charter","renderChart","maxGen","$","highcharts","chart","animation","svg","marginRight","events","load","series","latest","slice","console","log","addPoint","title","text","xAxis","tickPixelInterval","yAxis","plotLines","value","width","tooltip","formatter","name","dateFormat","numberFormat","legend","enabled","exporting"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 356ce5481f12db82a91f\n **/","import Simulation from './simulation.js';\nimport SimulationView from './simulation_view.js';\nimport Charter from './chart.js';\n\nwindow.addEventListener('DOMContentLoaded', function(){\n  let canvas = document.getElementById('simulation-canvas');\n  let context = canvas.getContext('2d');\n  let simulation = new Simulation(500, 500, 3, 30);\n  let simulationView = new SimulationView(simulation, context);\n  Highcharts.setOptions({\n      global: {\n          useUTC: false\n      }\n  });\n\n  simulationView.start();\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/evolution.js\n **/","import Prey from './prey.js';\nimport Predator from './predator.js';\nimport Charter from './chart.js';\n\nconst COLORS = ['blue', 'green', 'aqua', 'bisque', 'violet', 'chartreuse', 'deeppink', 'orange'];\n\nclass Simulation {\n  constructor(dimX, dimY, initialPred, initialPrey) {\n    this.DIM_X = dimX;\n    this.DIM_Y = dimY;\n    this.initialPredators = initialPred;\n    this.initialPrey = initialPrey;\n    this.predators = [];\n    this.prey = [];\n    this.steps = 0;\n    this.mutationRate = .03;\n    this.mutantIdx = 0;\n    this.data = [];\n    this.preyGeneration = 250;\n\n    while(this.prey.length < this.initialPrey){\n      this.addPrey(2, 'blue', 'original');\n    }\n\n    while(this.predators.length < this.initialPredators){\n      this.addPredator();\n    }\n\n    this.charter = new Charter(this)\n  }\n\n  addPrey(speed, color, strain){\n    if(this.prey.length < 100){\n      this.prey.push(new Prey({\n        pos: this.randomPosition(),\n        speed: speed,\n        radius: 5,\n        color: color,\n        simulation: this,\n        strain: strain\n      }));\n    }\n  }\n\n  addPredator(){\n    this.predators.push(new Predator({\n      pos: this.randomPosition(),\n      speed: 2.7,\n      radius: 10,\n      color: 'red',\n      simulation: this,\n      mutationRate: .03\n    }));\n  }\n\n  allAnimals(){\n    return [...this.prey, ...this.predators];\n  }\n\n  draw(ctx){\n    ctx.clearRect(0, 0, this.DIM_X, this.DIM_Y);\n    this.allAnimals().forEach(animal => {\n      animal.draw(ctx);\n    });\n  }\n\n  step(){\n    this.moveAnimals();\n    this.handleCollisions();\n    this.reproduce();\n    this.die();\n    if(this.steps % 250 === 0){\n      this.recordData(this.steps / 250);\n    }\n\n    this.steps++;\n  }\n\n  recordData(generation){\n    let strainInfo = this.getStrainInfo();\n    let avgSpeed = this.getAverageSpeed();\n\n    this.data.push({\n      generation: generation,\n      predators: this.predators.length,\n      prey: this.prey.length,\n      dominantStrain: strainInfo[1],\n      numStrains: strainInfo[0],\n      strains: strainInfo[2],\n      averageSpeed: avgSpeed\n    });\n\n  }\n\n  getStrainInfo(){\n    let strains = {};\n    let strainCount = 0;\n\n    this.prey.forEach(preyObj => {\n      if(strains[preyObj.strain]){\n        strains[preyObj.strain] = strains[preyObj.strain] + 1;\n      } else {\n        strains[preyObj.strain] = 1;\n        strainCount += 1;\n      }\n    });\n\n    let maxCount = 0;\n    let maxStrain = null;\n\n    Object.keys(strains).forEach(strain => {\n      if(strains[strain] > maxCount){\n        maxStrain = strain;\n        maxCount = strains[strain];\n      }\n    });\n\n    return [strainCount, maxStrain, strains];\n  }\n\n\n  getAverageSpeed(){\n    let total = 0;\n    this.prey.forEach(preyObj => {\n      total += preyObj.speed;\n    });\n    return (total / this.prey.length);\n  }\n\n  reproduce(){\n    this.prey.forEach(preyObj => {\n\n      if(preyObj.steps % this.preyGeneration === 0 && preyObj.steps > 0){\n        let mutationNum = Math.random();\n\n        if(mutationNum > .97){\n          this.mutantIdx += 1;\n          let newSpeed = preyObj.speed + .25;\n          this.addPrey(newSpeed, COLORS[this.mutantIdx % COLORS.length], `strain-${this.mutantIdx}`);\n        } else if (mutationNum < .03) {\n          this.mutantIdx += 1;\n          let newSpeed = preyObj.speed - .25;\n          this.addPrey(newSpeed, COLORS[this.mutantIdx % COLORS.length, `strain-${this.mutantIdx}`]);\n        } else {\n          let newSpeed = preyObj.speed + .1 * (.5 - Math.random());\n          this.addPrey(newSpeed, preyObj.color, preyObj.strain);\n        }\n      }\n    });\n\n    this.predators.forEach(predObj => {\n      if(predObj.steps % 300 === 0 && predObj.steps > 0){\n        this.addPredator();\n      }\n    });\n  }\n\n  die(){\n    let simulation = this;\n\n    this.predators.forEach(predObj => {\n      if(predObj.sinceFood > 175 || predObj.steps > 2000){\n        simulation.remove(predObj, 'predator');\n      }\n    });\n\n    this.prey.forEach(preyObj => {\n      if(preyObj.steps > 650){\n        simulation.remove(preyObj, 'prey');\n      }\n    });\n  }\n\n  moveAnimals(){\n    this.allAnimals().forEach(animal => {\n      animal.move();\n    });\n  }\n\n  randomPosition() {\n    return [this.DIM_X * Math.random(), this.DIM_Y * Math.random()];\n  }\n\n  isOutOfBounds(pos){\n    if(pos[0] > this.DIM_X || pos[0] < this.DIM_X || pos[1] > this.DIM_Y || pos[1] < this.DIM_Y){\n      return true;\n    }\n    return false;\n  }\n\n  wrap(pos){\n    const x = (pos[0] + this.DIM_X) % this.DIM_X;\n    const y = (pos[1] + this.DIM_Y) % this.DIM_Y;\n    return [x,y];\n  }\n\n  handleCollisions(){\n    let toRemove = [];\n\n    let simulation = this;\n    this.prey.forEach(preyObj => {\n      simulation.predators.forEach(predObj =>{\n        if(preyObj.isTouching(predObj) && !toRemove.includes(preyObj)){\n          predObj.resetSinceFood();\n          toRemove.push(preyObj);\n        }\n      });\n    });\n\n    toRemove.forEach(item => {\n      this.remove(item, 'prey');\n    });\n  }\n\n  remove(animal, type){\n    if(type === 'prey'){\n      let idx = this.prey.indexOf(animal);\n      this.prey.splice(idx, 1);\n    } else {\n      let idx = this.predators.indexOf(animal);\n      this.predators.splice(idx, 1);\n    }\n  };\n}\n\nexport default Simulation;\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/simulation.js\n **/","import Animal from './animal.js';\nimport * as UTIL from './utils.js';\n\nclass Prey extends Animal {\n  constructor(options){\n    super(options);\n  }\n\n\n  setVelocity(){\n    if(this.steps % 15 === 0 || this.steps < 10){\n      let closestPred = this.findClosestPredator();\n      let dir = UTIL.findDirection(this.position, closestPred.position);\n      this.velocity = [- this.speed * dir[0], - this.speed * dir[1]];\n    }\n  }\n\n  findClosestPredator(){\n    let prey = this;\n\n    let closest;\n    let minDistance = 100000;\n\n    this.simulation.predators.forEach(predator => {\n      const distance = UTIL.distance(prey.position, predator.position);\n      if(distance < minDistance){\n        minDistance = distance;\n        closest = predator;\n      }\n    });\n\n    return closest;\n  }\n}\n\nexport default Prey;\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/prey.js\n **/","import * as UTIL from './utils.js';\n\nclass Animal {\n  constructor(options) {\n    this.position = options['pos'];\n    this.speed = options['speed'];\n    this.radius = options['radius'];\n    this.color = options['color'];\n    this.simulation = options['simulation'];\n    this.velocity = [0, 0];\n    this.steps = 0;\n    this.strain = options['strain'];\n  }\n\n  isTouching(otherAnimal){\n    if(UTIL.distance(this.position, otherAnimal.position) < (this.radius + otherAnimal.radius)){\n      return true;\n    }\n    return false;\n  }\n\n  move(){\n    this.steps++;\n    this.setVelocity();\n    this.position[0] += this.velocity[0];\n    this.position[1] += this.velocity[1];\n    if(this.simulation.isOutOfBounds(this.position)){\n      this.position = this.simulation.wrap(this.position);\n    }\n  }\n\n  draw(ctx){\n    ctx.fillStyle = this.color;\n    ctx.beginPath();\n\n    ctx.arc(\n      this.position[0],\n      this.position[1],\n      this.radius,\n      0,\n      2 * Math.PI,\n      false\n    );\n\n    ctx.fill();\n  }\n}\n\nexport default Animal;\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/animal.js\n **/","\nexport const diff = (pos1, pos2, dir) => {\n\n  let idx = dir === 'x' ? 0 : 1;\n\n  if(Math.abs(pos2[idx] - pos1[idx]) > 250){\n    if(pos2[idx] > 250){\n      return (pos2[idx] - 500) - pos1[idx];\n    } else {\n      return (500 + pos2[idx]) - pos1[idx];\n    }\n  } else {\n    return (pos2[idx] - pos1[idx]);\n  }\n};\n\n\nexport const dir = (pos1, pos2, dir) => {\n  let idx = dir === 'x' ? 0 : 1;\n  if(pos1[idx] < pos2[idx]){\n    if((pos2[idx] - pos1[idx]) < (pos1[idx] + 500 - pos2[idx])){\n      return 1;\n    } else {\n      return - 1;\n    }\n  } else {\n    if((pos1[idx] - pos2[idx]) < (pos2[idx] + 500 - pos1[idx])){\n      return -1;\n    } else {\n      return 1;\n    }\n  }\n};\n\n\nexport const distance = (pos1, pos2) => {\n  let xDiff = diff(pos1, pos2, 'x');\n  let yDiff = diff(pos1, pos2, 'y');\n\n  return Math.sqrt(Math.pow(xDiff, 2) + Math.pow(yDiff, 2));\n}\n\nexport const findDirection = (pos1, pos2) => {\n  let posDiff = [diff(pos1, pos2, 'x'), diff(pos1, pos2, 'y')];\n\n  let xDir = dir(pos1, pos2, 'x');\n  let yDir = dir(pos1, pos2, 'y');\n\n  let magnitude = Math.pow(posDiff[0], 2) + Math.pow(posDiff[1], 2);\n  return [xDir * Math.pow(posDiff[0], 2)/magnitude, yDir * Math.pow(posDiff[1], 2)/magnitude];\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/utils.js\n **/","import Animal from './animal.js';\nimport * as UTIL from './utils.js';\n\n\nclass Predator extends Animal {\n  constructor(options){\n    super(options);\n    this.sinceFood = 0;\n  }\n\n  setVelocity(){\n    if(this.steps % 5 === 0 || this.steps < 10){\n      let closestPred = this.findClosestPrey();\n      let dir = UTIL.findDirection(this.position, closestPred.position);\n      this.velocity = [this.speed * dir[0], this.speed * dir[1]];\n    }\n\n    this.sinceFood++;\n  }\n\n  findClosestPrey(){\n    let predator = this;\n\n    let closest;\n    let minDistance = 100000;\n\n    this.simulation.prey.forEach(prey => {\n      const distance = UTIL.distance(predator.position, prey.position);\n      if(distance < minDistance){\n        minDistance = distance;\n        closest = prey;\n      }\n    });\n\n    return closest;\n  }\n\n  resetSinceFood(){\n    this.sinceFood = 0;\n  }\n}\n\nexport default Predator;\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/predator.js\n **/","class SimulationView {\n  constructor(simulation, ctx) {\n    this.simulation = simulation;\n    this.ctx = ctx;\n  }\n\n  start(){\n    let view = this;\n\n    this.simulationID = window.setInterval(() => {\n      view.simulation.draw(view.ctx);\n      view.simulation.step();\n    }, 30);\n  }\n}\n\nexport default SimulationView;\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/simulation_view.js\n **/","class Charter {\n  constructor(simulation){\n    this.simulation = simulation;\n    this.renderChart();\n    this.maxGen = 0;\n  }\n\n\n  renderChart(){\n    let simulation = this.simulation;\n    let charter = this;\n    $('#pop-graph').highcharts({\n        chart: {\n            type: 'spline',\n            animation: Highcharts.svg,\n            marginRight: 10,\n            events: {\n                load: function () {\n                    var series = this.series[0];\n                    setInterval(function () {\n                        let latest = simulation.data.slice(-1)[0];\n\n                        if(latest.generation > charter.maxGen){\n                          charter.maxGen = latest.generation;\n                          console.log(latest.generation);\n                          console.log(latest.prey);\n                          series.addPoint([latest.generation, latest.prey], true, false);\n                          console.log(series);\n                        }\n                    }, 1000);\n                }\n            }\n        },\n        title: {\n            text: 'Prey Population'\n        },\n        xAxis: {\n          title: {\n              text: 'Prey Population'\n          },\n          tickPixelInterval: 150\n        },\n        yAxis: {\n            title: {\n                text: 'Value'\n            },\n            plotLines: [{\n                value: 0,\n                width: 1,\n                color: '#808080'\n            }]\n        },\n        tooltip: {\n            formatter: function () {\n                return '<b>' + this.series.name + '</b><br/>' +\n                    Highcharts.dateFormat('%Y-%m-%d %H:%M:%S', this.x) + '<br/>' +\n                    Highcharts.numberFormat(this.y, 2);\n            }\n        },\n        legend: {\n            enabled: false\n        },\n        exporting: {\n            enabled: false\n        },\n        series: [{\n            name: 'Population Data',\n            data: (function () {\n                  return [[0,30]];\n            }())\n        }]\n    });\n  }\n}\n\nexport default Charter;\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/chart.js\n **/"],"sourceRoot":""}