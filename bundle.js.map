{"version":3,"sources":["webpack:///webpack/bootstrap 81ec503f986c95da4e95","webpack:///./lib/evolution.js","webpack:///./lib/simulation.js","webpack:///./lib/prey.js","webpack:///./lib/animal.js","webpack:///./lib/utils.js","webpack:///./lib/predator.js","webpack:///./lib/chart.js","webpack:///./lib/simulation_view.js"],"names":["window","addEventListener","canvas","document","getElementById","context","getContext","simulation","simulationView","Highcharts","setOptions","global","useUTC","start","MUTANT_COLORS","Simulation","dimX","dimY","initialPred","initialPrey","DIM_X","DIM_Y","initialPredators","predators","prey","steps","mutationRate","mutantIdx","data","preyGeneration","predGeneration","length","addPrey","addPredator","charter","speed","color","strain","push","pos","randomPosition","radius","ctx","clearRect","allAnimals","forEach","animal","draw","moveAnimals","handleCollisions","reproducePrey","reproducePredators","die","recordData","generation","strainInfo","getStrainInfo","avgSpeed","getAverageSpeed","dominantStrain","numStrains","strains","averageSpeed","strainCount","preyObj","population","totalSpeed","maxCount","maxStrain","Object","keys","total","reproduces","mutationNum","Math","random","resetReproduce","newSpeed","strainName","console","log","sinceReproduce","reproChance","reproLikelihood","predObj","sinceFood","remove","move","x","y","toRemove","isTouching","includes","resetSinceFood","item","type","idx","indexOf","splice","UTIL","Prey","options","closestPred","findClosestPredator","dir","findDirection","position","velocity","closest","minDistance","distance","predator","Animal","otherAnimal","setVelocity","isOutOfBounds","wrap","fillStyle","beginPath","arc","PI","fill","diff","pos1","pos2","abs","xDiff","yDiff","sqrt","pow","posDiff","xDir","yDir","magnitude","Predator","findClosestPrey","Charter","maxPopGen","maxFitGen","renderFitnessChart","renderPopulationChart","$","highcharts","chart","animation","svg","marginRight","events","load","preySeries","series","predSeries","setInterval","latest","maxGen","addPoint","title","text","style","fontSize","xAxis","tickPixelInterval","yAxis","labels","format","plotLines","value","width","tooltip","formatter","name","toFixed","legend","enabled","exporting","credits","marker","fitSeries","SimulationView","view","updateStrainTable","simulationID","step","clearInterval","topStrains","getTopStrains","empty","append","strainArray","map","assign","sort","s1","s2","slice"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 81ec503f986c95da4e95\n **/","import Simulation from './simulation.js';\nimport SimulationView from './simulation_view.js';\nimport Charter from './chart.js';\n\nwindow.addEventListener('DOMContentLoaded', function(){\n  let canvas = document.getElementById('simulation-canvas');\n  let context = canvas.getContext('2d');\n  let simulation = new Simulation(500, 500, 5, 30);\n  let simulationView = new SimulationView(simulation, context);\n  Highcharts.setOptions({\n      global: {\n          useUTC: false\n      }\n  });\n\n  simulationView.start();\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/evolution.js\n **/","import Prey from './prey.js';\nimport Predator from './predator.js';\nimport Charter from './chart.js';\n\nconst MUTANT_COLORS = ['green', 'aqua', 'bisque', 'violet', 'chartreuse', 'deeppink', 'orange'];\n\nclass Simulation {\n  constructor(dimX, dimY, initialPred, initialPrey) {\n    this.DIM_X = dimX;\n    this.DIM_Y = dimY;\n    this.initialPredators = initialPred;\n    this.initialPrey = initialPrey;\n    this.predators = [];\n    this.prey = [];\n    this.steps = 0;\n    this.mutationRate = .03;\n    this.mutantIdx = 0;\n    this.data = null;\n    this.preyGeneration = 200;\n    this.predGeneration = 350;\n\n    while(this.prey.length < this.initialPrey){\n      this.addPrey(2, 'blue', 'original');\n    }\n\n    while(this.predators.length < this.initialPredators){\n      this.addPredator();\n    }\n\n    this.charter = new Charter(this)\n  }\n\n  addPrey(speed, color, strain){\n    if(this.prey.length < 100){\n      this.prey.push(new Prey({\n        pos: this.randomPosition(),\n        speed: speed,\n        radius: 5,\n        color: color,\n        simulation: this,\n        strain: strain\n      }));\n    }\n  }\n\n  addPredator(){\n    this.predators.push(new Predator({\n      pos: this.randomPosition(),\n      speed: 2.7,\n      radius: 10,\n      color: 'red',\n      simulation: this,\n      mutationRate: .03\n    }));\n  }\n\n  allAnimals(){\n    return [...this.prey, ...this.predators];\n  }\n\n  draw(ctx){\n    ctx.clearRect(0, 0, this.DIM_X, this.DIM_Y);\n    this.allAnimals().forEach(animal => {\n      animal.draw(ctx);\n    });\n  }\n\n  step(){\n    this.moveAnimals();\n    this.handleCollisions();\n    this.reproducePrey();\n    this.reproducePredators();\n    this.die();\n    if(this.steps % (this.preyGeneration + 50) === 0){\n      this.recordData(this.steps / 250);\n    }\n\n    this.steps++;\n  }\n\n  recordData(generation){\n    let strainInfo = this.getStrainInfo();\n    let avgSpeed = this.getAverageSpeed();\n\n    this.data = {\n      generation: generation,\n      predators: (this.predators.length/this.initialPredators)*100,\n      prey: (this.prey.length/this.initialPrey)*100,\n      dominantStrain: strainInfo[1],\n      numStrains: strainInfo[0],\n      strains: strainInfo[2],\n      averageSpeed: avgSpeed\n    };\n\n  }\n\n  getStrainInfo(){\n    let strains = {};\n    let strainCount = 0;\n\n    this.prey.forEach(preyObj => {\n      if(strains[preyObj.strain]){\n        strains[preyObj.strain].population += 1;\n        strains[preyObj.strain].totalSpeed += preyObj.speed;\n      } else {\n        strains[preyObj.strain] = {\n          population: 1,\n          totalSpeed: preyObj.speed,\n          color: preyObj.color\n        };\n        strainCount += 1;\n      }\n    });\n\n    let maxCount = 0;\n    let maxStrain = null;\n\n    Object.keys(strains).forEach(strain => {\n      if(strains[strain].population > maxCount){\n        maxStrain = strain;\n        maxCount = strains[strain].population;\n      }\n    });\n\n    return [strainCount, maxStrain, strains];\n  }\n\n\n  getAverageSpeed(){\n    let total = 0;\n    this.prey.forEach(preyObj => {\n      total += preyObj.speed;\n    });\n    return (total / this.prey.length);\n  }\n\n  reproducePrey(){\n    const simulation = this;\n\n    this.prey.forEach(preyObj => {\n      if(simulation.reproduces(preyObj)){\n\n        const mutationNum = Math.random();\n        preyObj.resetReproduce();\n\n        if(mutationNum > .97){\n          this.mutantIdx += 1;\n          let newSpeed = preyObj.speed + .25;\n          let strainName = `strain-${this.mutantIdx}`;\n\n          this.addPrey(newSpeed, MUTANT_COLORS[this.mutantIdx % MUTANT_COLORS.length], strainName);\n        } else if (mutationNum < .03) {\n          this.mutantIdx += 1;\n          let newSpeed = preyObj.speed - .25;\n          let strainName = `strain-${this.mutantIdx}`;\n\n          this.addPrey(newSpeed, MUTANT_COLORS[this.mutantIdx % MUTANT_COLORS.length, strainName]);\n        } else {\n          let newSpeed = preyObj.speed + .1 * (.5 - Math.random());\n\n          if(!preyObj.strain){\n            console.log('undefined here');\n          }\n          this.addPrey(newSpeed, preyObj.color, preyObj.strain);\n        }\n      }\n    });\n\n  }\n\n  reproduces(prey){\n    if (prey.sinceReproduce > this.preyGeneration){\n      let reproChance = Math.random();\n      return (reproChance < (prey.sinceReproduce - this.preyGeneration) / 100) ? true : false;\n    } else {\n      return false;\n    }\n  }\n\n  reproducePredators(){\n    const simulation = this;\n\n    this.predators.forEach(predObj => {\n      const reproChance = Math.random();\n      const reproLikelihood = (predObj.sinceReproduce - this.predGeneration) / 100;\n\n      if(reproLikelihood > reproChance){\n        predObj.resetReproduce();\n        this.addPredator();\n      }\n    });\n  }\n\n  die(){\n    let simulation = this;\n\n    this.predators.forEach(predObj => {\n      if(predObj.sinceFood > 200 || predObj.steps > 1500){\n        simulation.remove(predObj, 'predator');\n      }\n    });\n\n    this.prey.forEach(preyObj => {\n      if(preyObj.steps > 600 || !preyObj.strain){\n        simulation.remove(preyObj, 'prey');\n      }\n    });\n  }\n\n  moveAnimals(){\n    this.allAnimals().forEach(animal => {\n      animal.move();\n    });\n  }\n\n  randomPosition() {\n    return [this.DIM_X * Math.random(), this.DIM_Y * Math.random()];\n  }\n\n  isOutOfBounds(pos){\n    if(pos[0] > this.DIM_X || pos[0] < this.DIM_X || pos[1] > this.DIM_Y || pos[1] < this.DIM_Y){\n      return true;\n    }\n    return false;\n  }\n\n  wrap(pos){\n    const x = (pos[0] + this.DIM_X) % this.DIM_X;\n    const y = (pos[1] + this.DIM_Y) % this.DIM_Y;\n    return [x,y];\n  }\n\n  handleCollisions(){\n    let toRemove = [];\n\n    let simulation = this;\n    this.prey.forEach(preyObj => {\n      simulation.predators.forEach(predObj =>{\n        if(preyObj.isTouching(predObj) && !toRemove.includes(preyObj)){\n          predObj.resetSinceFood();\n          toRemove.push(preyObj);\n        }\n      });\n    });\n\n    toRemove.forEach(item => {\n      this.remove(item, 'prey');\n    });\n  }\n\n  remove(animal, type){\n    if(type === 'prey'){\n      let idx = this.prey.indexOf(animal);\n      this.prey.splice(idx, 1);\n    } else {\n      let idx = this.predators.indexOf(animal);\n      this.predators.splice(idx, 1);\n    }\n  };\n}\n\nexport default Simulation;\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/simulation.js\n **/","import Animal from './animal.js';\nimport * as UTIL from './utils.js';\n\nclass Prey extends Animal {\n  constructor(options){\n    super(options);\n  }\n\n\n  setVelocity(){\n    if(this.steps % 15 === 0 || this.steps < 10){\n      let closestPred = this.findClosestPredator();\n      let dir = UTIL.findDirection(this.position, closestPred.position);\n      this.velocity = [- this.speed * dir[0], - this.speed * dir[1]];\n    }\n  }\n\n  findClosestPredator(){\n    let prey = this;\n\n    let closest;\n    let minDistance = 100000;\n\n    this.simulation.predators.forEach(predator => {\n      const distance = UTIL.distance(prey.position, predator.position);\n      if(distance < minDistance){\n        minDistance = distance;\n        closest = predator;\n      }\n    });\n\n    return closest;\n  }\n}\n\nexport default Prey;\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/prey.js\n **/","import * as UTIL from './utils.js';\n\nclass Animal {\n  constructor(options) {\n    this.position = options['pos'];\n    this.speed = options['speed'];\n    this.radius = options['radius'];\n    this.color = options['color'];\n    this.simulation = options['simulation'];\n    this.velocity = [0, 0];\n    this.steps = 0;\n    this.strain = options['strain'];\n    this.sinceReproduce = 0;\n  }\n\n  isTouching(otherAnimal){\n    if(UTIL.distance(this.position, otherAnimal.position) < (this.radius + otherAnimal.radius)){\n      return true;\n    }\n    return false;\n  }\n\n  move(){\n    this.steps++;\n\n    this.setVelocity();\n    this.position[0] += this.velocity[0];\n    this.position[1] += this.velocity[1];\n    if(this.simulation.isOutOfBounds(this.position)){\n      this.position = this.simulation.wrap(this.position);\n    }\n\n    this.sinceReproduce++;\n  }\n\n\n  resetReproduce(){\n    this.sinceReproduce = 0; \n  }\n\n  draw(ctx){\n    ctx.fillStyle = this.color;\n    ctx.beginPath();\n\n    ctx.arc(\n      this.position[0],\n      this.position[1],\n      this.radius,\n      0,\n      2 * Math.PI,\n      false\n    );\n\n    ctx.fill();\n  }\n}\n\nexport default Animal;\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/animal.js\n **/","\nexport const diff = (pos1, pos2, dir) => {\n\n  let idx = dir === 'x' ? 0 : 1;\n\n  if(Math.abs(pos2[idx] - pos1[idx]) > 250){\n    if(pos2[idx] > 250){\n      return (pos2[idx] - 500) - pos1[idx];\n    } else {\n      return (500 + pos2[idx]) - pos1[idx];\n    }\n  } else {\n    return (pos2[idx] - pos1[idx]);\n  }\n};\n\n\nexport const dir = (pos1, pos2, dir) => {\n  let idx = dir === 'x' ? 0 : 1;\n  if(pos1[idx] < pos2[idx]){\n    if((pos2[idx] - pos1[idx]) < (pos1[idx] + 500 - pos2[idx])){\n      return 1;\n    } else {\n      return - 1;\n    }\n  } else {\n    if((pos1[idx] - pos2[idx]) < (pos2[idx] + 500 - pos1[idx])){\n      return -1;\n    } else {\n      return 1;\n    }\n  }\n};\n\n\nexport const distance = (pos1, pos2) => {\n  let xDiff = diff(pos1, pos2, 'x');\n  let yDiff = diff(pos1, pos2, 'y');\n\n  return Math.sqrt(Math.pow(xDiff, 2) + Math.pow(yDiff, 2));\n}\n\nexport const findDirection = (pos1, pos2) => {\n  let posDiff = [diff(pos1, pos2, 'x'), diff(pos1, pos2, 'y')];\n\n  let xDir = dir(pos1, pos2, 'x');\n  let yDir = dir(pos1, pos2, 'y');\n\n  let magnitude = Math.pow(posDiff[0], 2) + Math.pow(posDiff[1], 2);\n  return [xDir * Math.pow(posDiff[0], 2)/magnitude, yDir * Math.pow(posDiff[1], 2)/magnitude];\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/utils.js\n **/","import Animal from './animal.js';\nimport * as UTIL from './utils.js';\n\n\nclass Predator extends Animal {\n  constructor(options){\n    super(options);\n    this.sinceFood = 0;\n  }\n\n  setVelocity(){\n    if(this.steps % 5 === 0 || this.steps < 10){\n      let closestPred = this.findClosestPrey();\n      let dir = UTIL.findDirection(this.position, closestPred.position);\n      this.velocity = [this.speed * dir[0], this.speed * dir[1]];\n    }\n\n    this.sinceFood++;\n  }\n\n  findClosestPrey(){\n    let predator = this;\n\n    let closest;\n    let minDistance = 100000;\n\n    this.simulation.prey.forEach(prey => {\n      const distance = UTIL.distance(predator.position, prey.position);\n      if(distance < minDistance){\n        minDistance = distance;\n        closest = prey;\n      }\n    });\n\n    return closest;\n  }\n\n  resetSinceFood(){\n    this.sinceFood = 0;\n  }\n}\n\nexport default Predator;\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/predator.js\n **/","class Charter {\n  constructor(simulation){\n    this.simulation = simulation;\n    this.maxPopGen = 0;\n    this.maxFitGen = 0;\n    this.renderFitnessChart();\n    this.renderPopulationChart();\n  }\n\n  renderPopulationChart(){\n    let simulation = this.simulation;\n    let charter = this;\n    $('#pop-graph').highcharts({\n      chart: {\n        type: 'spline',\n        animation: Highcharts.svg,\n        marginRight: 10,\n        events: {\n          load: function () {\n            let preySeries = this.series[0];\n            let predSeries = this.series[1];\n\n            setInterval(function () {\n              let latest = simulation.data;\n\n              if(latest.generation > charter.maxPopGen){\n                charter.maxGen = latest.generation;\n                preySeries.addPoint([latest.generation, latest.prey], true, false);\n                predSeries.addPoint([latest.generation, latest.predators], true, false);\n              }\n            }, 1000);\n          }\n        }\n      },\n    title: {\n      text: 'Species populations',\n      style: {\n              fontSize: '14px'\n            }\n    },\n    xAxis: {\n      title: {\n        text: 'Generations'\n      },\n      tickPixelInterval: 150\n    },\n    yAxis: {\n      title: {\n        text: 'Population (relative to initial)'\n      },\n      labels: {\n        format: `{value} %`\n      },\n      plotLines: [{\n        value: 0,\n        width: 1,\n        color: '#808080'\n      }]\n    },\n    tooltip: {\n      formatter: function () {\n        return '<b>' + `${this.series.name} Population` + '</b><br/>' +\n          `Generation: ${this.x}` + '<br/>' +\n          `Relative population: ${this.y.toFixed(2)}`;\n      }\n    },\n    legend: {\n      enabled: true\n    },\n    exporting: {\n      enabled: false\n    },\n    credits: {\n      enabled: false\n    },\n    series: [{\n      name: 'Prey',\n      data: (function () {\n              return [[0,100]];\n            }()),\n      marker: {\n        enabled: true\n        },\n      },\n      {\n        name: 'Predators',\n        data: (function () {\n          return [[0,100]];\n        }()),\n        marker: {\n          enabled: true\n          },\n        }]\n    });\n  }\n\n  renderFitnessChart(){\n    let simulation = this.simulation;\n    let charter = this;\n    $('#fit-graph').highcharts({\n      chart: {\n        type: 'spline',\n        animation: Highcharts.svg,\n        marginRight: 10,\n        events: {\n          load: function () {\n            let fitSeries = this.series[0];\n\n            setInterval(function () {\n              let latest = simulation.data;\n\n              if(latest.generation > charter.maxFitGen){\n                charter.maxFitGen = latest.generation;\n                fitSeries.addPoint([latest.generation, latest.averageSpeed], true, false);\n              }\n            }, 1000);\n          }\n        }\n      },\n    title: {\n      text: 'Average Prey Fitness',\n      style: {\n              fontSize: '14px'\n            }\n    },\n    xAxis: {\n      title: {\n        text: 'Generations'\n      },\n      tickPixelInterval: 150\n    },\n    yAxis: {\n      title: {\n        text: 'Average Speed'\n      },\n      labels: {\n        format: `{value}`\n      },\n      plotLines: [{\n        value: 0,\n        width: 1,\n        color: '#f00'\n      }]\n    },\n    tooltip: {\n      formatter: function () {\n        return '<b>' + `Average Prey Fitness` + '</b><br/>' +\n          `Generation: ${this.x}` + '<br/>' +\n          `Average speed: ${this.y.toFixed(3)}`;\n      }\n    },\n    legend: {\n      enabled: false\n    },\n    exporting: {\n      enabled: false\n    },\n    credits: {\n      enabled: false\n    },\n    series: [{\n      name: 'Average Speed',\n      data: (function () {\n              return [[0,2]];\n            }())\n      }]\n    });\n  }\n}\n\nexport default Charter;\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/chart.js\n **/","class SimulationView {\n  constructor(simulation, ctx) {\n    this.simulation = simulation;\n    this.ctx = ctx;\n    this.maxGen = 0;\n  }\n\n  start(){\n    let view = this;\n\n    setInterval(function () {\n      let latest = view.simulation.data;\n\n      if(latest.generation > view.maxGen){\n        view.maxGen = latest.generation;\n        view.updateStrainTable();\n      }\n    }, 1000);\n\n    this.simulationID = window.setInterval(() => {\n      view.simulation.draw(view.ctx);\n      view.simulation.step();\n      if(view.simulation.prey.length === 0 || view.simulation.predators.length === 0){\n        window.clearInterval(this.simulationID);\n      }\n    }, 30);\n  }\n\n  updateStrainTable(){\n\n    const topStrains = this.getTopStrains();\n    $('#top-strains-body').empty();\n\n    topStrains.forEach(strain => {\n      $('#top-strains-body').append(\n        `<tr>\n          <td>\n            <div class=\"strain-key\" style=\"background:${strain.color}\"></div>\n            ${strain.name}\n          </td>\n          <td>${strain.population}</td>\n          <td>${(strain.totalSpeed / strain.population).toFixed(3)}</td>\n        </tr>`\n      );\n    });\n\n    $('#table-tile').text(`Top Strains: Generation ${this.maxGen}`);\n  }\n\n  getTopStrains(){\n    const strains = this.simulation.data.strains;\n\n    let strainArray = Object.keys(strains).map(strainName =>{\n      return Object.assign({}, strains[strainName], {name: strainName});\n    });\n\n    return strainArray.sort((s1, s2) => {\n      return s2.population - s1.population;\n    }).slice(0,5);\n  }\n}\n\nexport default SimulationView;\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/simulation_view.js\n **/"],"sourceRoot":""}